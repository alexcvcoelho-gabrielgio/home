<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="348.7375px" preserveAspectRatio="none" style="width:1027px;height:348px;" version="1.1" viewBox="0 0 1027 348" width="1027.3319px" zoomAndPan="magnify"><defs><filter height="300%" id="fr6twn4p2wpik" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.2212581344902387"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.442516268980477" dy="4.442516268980477" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 5.0,5.0;" x1="26.6551" x2="26.6551" y1="42.5336" y2="306.7852"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 5.0,5.0;" x1="323.7484" x2="323.7484" y1="42.5336" y2="306.7852"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 5.0,5.0;" x1="606.4035" x2="606.4035" y1="42.5336" y2="306.7852"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 5.0,5.0;" x1="743.5662" x2="743.5662" y1="42.5336" y2="306.7852"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 5.0,5.0;" x1="894.0564" x2="894.0564" y1="42.5336" y2="306.7852"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 5.0,5.0;" x1="985.128" x2="985.128" y1="42.5336" y2="306.7852"/><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="31.0976" x="8.885" y="3.3319"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="15.5488" x="16.6594" y="25.539">UI</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="31.0976" x="8.885" y="305.6746"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="15.5488" x="16.6594" y="327.8818">UI</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="163.2625" x="240.4512" y="3.3319"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="147.7137" x="248.2256" y="25.539">Session-Command</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="163.2625" x="240.4512" y="305.6746"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="147.7137" x="248.2256" y="327.8818">Session-Command</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="66.6377" x="570.8633" y="3.3319"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="51.0889" x="578.6377" y="25.539">KAFKA</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="66.6377" x="570.8633" y="305.6746"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="51.0889" x="578.6377" y="327.8818">KAFKA</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="138.8286" x="672.4859" y="3.3319"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="123.2798" x="680.2603" y="25.539">Session-Worker</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="138.8286" x="672.4859" y="305.6746"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="123.2798" x="680.2603" y="327.8818">Session-Worker</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="82.1866" x="850.7419" y="3.3319"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="66.6377" x="858.5163" y="25.539">Datomic</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="82.1866" x="850.7419" y="305.6746"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="66.6377" x="858.5163" y="327.8818">Datomic</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="68.859" x="948.4772" y="3.3319"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="53.3102" x="956.2516" y="25.539">Mongo</text><rect fill="#FEFECE" filter="url(#fr6twn4p2wpik)" height="33.6486" style="stroke: #A80036; stroke-width: 1.6659436008676791;" width="68.859" x="948.4772" y="305.6746"/><text fill="#000000" font-family="sans-serif" font-size="15.5488" lengthAdjust="spacingAndGlyphs" textLength="53.3102" x="956.2516" y="327.8818">Mongo</text><polygon fill="#A80036" points="310.9761,72.5206,322.0824,76.9631,310.9761,81.4056,315.4187,76.9631" style="stroke: #A80036; stroke-width: 1.1106290672451193;"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="26.6551" x2="317.6399" y1="76.9631" y2="76.9631"/><text fill="#000000" font-family="sans-serif" font-size="14.4382" lengthAdjust="spacingAndGlyphs" textLength="226.5683" x="34.4295" y="71.4843">Envia mensagem de atulização</text><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="324.3037" x2="370.9501" y1="109.4664" y2="109.4664"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="370.9501" x2="370.9501" y1="109.4664" y2="123.9046"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="325.4143" x2="370.9501" y1="123.9046" y2="123.9046"/><polygon fill="#A80036" points="336.5206,119.462,325.4143,123.9046,336.5206,128.3471,332.0781,123.9046" style="stroke: #A80036; stroke-width: 1.1106290672451193;"/><text fill="#000000" font-family="sans-serif" font-size="14.4382" lengthAdjust="spacingAndGlyphs" textLength="233.2321" x="332.0781" y="103.84">Validações e regras de negocios</text><polygon fill="#A80036" points="38.872,151.6703,27.7657,156.1128,38.872,160.5553,34.4295,156.1128" style="stroke: #A80036; stroke-width: 1.1106290672451193;"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="32.2082" x2="323.1931" y1="156.1128" y2="156.1128"/><text fill="#000000" font-family="sans-serif" font-size="14.4382" lengthAdjust="spacingAndGlyphs" textLength="270.9935" x="45.5358" y="150.6339">Envia uma mensagem HTTP Ok (200)</text><polygon fill="#A80036" points="593.0759,184.026,604.1822,188.4685,593.0759,192.9111,597.5184,188.4685" style="stroke: #A80036; stroke-width: 1.1106290672451193;"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="324.3037" x2="599.7397" y1="188.4685" y2="188.4685"/><text fill="#000000" font-family="sans-serif" font-size="14.4382" lengthAdjust="spacingAndGlyphs" textLength="255.4447" x="332.0781" y="182.9897">Escreve a mensagem em uma lista</text><polygon fill="#A80036" points="730.7939,216.3818,741.9002,220.8243,730.7939,225.2668,735.2364,220.8243" style="stroke: #A80036; stroke-width: 1.1106290672451193;"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="606.4035" x2="737.4577" y1="220.8243" y2="220.8243"/><text fill="#000000" font-family="sans-serif" font-size="14.4382" lengthAdjust="spacingAndGlyphs" textLength="111.0629" x="614.1779" y="215.3454">Envia comando</text><polygon fill="#A80036" points="880.7289,248.7375,891.8351,253.18,880.7289,257.6226,885.1714,253.18" style="stroke: #A80036; stroke-width: 1.1106290672451193;"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="744.1215" x2="887.3926" y1="253.18" y2="253.18"/><text fill="#000000" font-family="sans-serif" font-size="14.4382" lengthAdjust="spacingAndGlyphs" textLength="123.2798" x="751.8959" y="247.7012">escreve historico</text><polygon fill="#A80036" points="971.8004,281.0933,982.9067,285.5358,971.8004,289.9783,976.243,285.5358" style="stroke: #A80036; stroke-width: 1.1106290672451193;"/><line style="stroke: #A80036; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="744.1215" x2="978.4642" y1="285.5358" y2="285.5358"/><text fill="#000000" font-family="sans-serif" font-size="14.4382" lengthAdjust="spacingAndGlyphs" textLength="169.9262" x="751.8959" y="280.0569">atualiza dado completo</text><line style="stroke: #000000; stroke-width: 1.1106290672451193; stroke-dasharray: 2.0,2.0;" x1="3.3319" x2="1027.3319" y1="294.5683" y2="294.5683"/><!--
@startuml
scale 1024*768
UI - -> "Session-Command": Envia mensagem de atulização
"Session-Command" - -> "Session-Command": Validações e regras de negocios
"Session-Command" - -> UI: Envia uma mensagem HTTP Ok (200)
"Session-Command" - -> KAFKA: Escreve a mensagem em uma lista
KAFKA - -> "Session-Worker": Envia comando
"Session-Worker" - -> Datomic: escreve historico
"Session-Worker" - -> Mongo: atualiza dado completo
newpage
UI - -> "Session-Command": GET /api/session/{session-id}
"Session-Command" - -> Mongo: Busca pela informacao
"Session-Command" <- - Mongo: Informação completa
"Session-Command" - -> UI: Parse infomação para o usuarios
@enduml

PlantUML version 1.2017.12(Wed Apr 26 13:06:36 BRT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_112-release-736-b16
Operating System: Linux
OS Version: 4.4.0-53-generic
Default Encoding: UTF-8
Language: pt
Country: BR
--></g></svg>